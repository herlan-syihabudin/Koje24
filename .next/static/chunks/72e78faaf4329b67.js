(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77661,45042,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let s="koje24-best-seller-data";function l(){try{let e=localStorage.getItem(s);return e?JSON.parse(e):{}}catch{return{}}}function n(e){var t;t=JSON.stringify(e),localStorage.setItem(s,t)}function i(e,t){let a=l();if(a[e]){let s=a[e];s.rating=(s.rating*s.reviews+t)/(s.reviews+1),s.reviews+=1}else a[e]={rating:t,reviews:1,score:0,isBestSeller:!1};let s=a[e];s.score=5*s.rating+3*s.reviews,n(a)}function r(){let e=l(),t=Object.entries(e).sort((e,t)=>t[1].score-e[1].score).slice(0,3);return Object.values(e).forEach(e=>e.isBestSeller=!1),t.forEach(([t])=>{e[Number(t)].isBestSeller=!0}),n(e),e}function o(){let[e,t]=(0,a.useState)({});return(0,a.useEffect)(()=>{t({...r()});let e=()=>{t({...r()})};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),e}e.s(["updateRating",()=>i,"useBestSellerRanking",()=>o],45042);let c={"Golden Detox":1,"Yellow Immunity":2,"Green Revive":3,"Sunrise Boost":4,"Lemongrass Fresh":5,"Red Vitality":6};function m({onSuccess:e}){let[s,l]=(0,a.useState)(!1),[n,r]=(0,a.useState)(!1),[o,m]=(0,a.useState)({}),[d,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[g,p]=(0,a.useState)(null),[j,b]=(0,a.useState)(null),[v,f]=(0,a.useState)(null),[y,N]=(0,a.useState)({nama:"",kota:"",pesan:"",rating:5,varian:"",img:"",active:!1,showOnHome:!1});(0,a.useEffect)(()=>{let e=()=>l(!1);return window.addEventListener("close-testimoni-modal",e),()=>window.removeEventListener("close-testimoni-modal",e)},[]),(0,a.useEffect)(()=>(s?document.body.classList.add("body-lock"):document.body.classList.remove("body-lock"),()=>document.body.classList.remove("body-lock")),[s]);let w=async()=>{if(!v)return"";let e=new FormData;e.append("file",v);let t=await fetch("/api/upload",{method:"POST",body:e});return(await t.json()).url||""},k=async t=>{let a;if(t.preventDefault(),h(null),a={},y.nama.trim().length<2&&(a.nama="Nama minimal 2 karakter"),y.kota.trim().length<2&&(a.kota="Kota minimal 2 karakter"),y.pesan.trim().length<10&&(a.pesan="Minimal 10 karakter"),y.varian||(a.varian="Pilih varian"),m(a),0===Object.keys(a).length){if(d&&Date.now()-d<6e3)return void h("Tunggu sebentar sebelum mengirim lagiâ€¦");r(!0);try{let t="";v&&(t=await w());let a={...y,active:y.rating>3,showOnHome:y.rating>3,img:t},s=c[y.varian]||0;s>0&&i(s,y.rating),await fetch("/api/testimonial",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),x(Date.now()),h("Terima kasih! Testimoni kamu terkirim ðŸ™Œ"),e?.(),setTimeout(()=>l(!1),900)}catch(e){console.error(e),h("Terjadi kesalahan, coba lagi.")}finally{r(!1)}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>l(!0),className:"px-5 py-2 bg-[#0FA3A8] text-white rounded-full shadow-md hover:shadow-lg text-sm md:text-base transition-all",children:"+ Tulis Testimoni"}),s&&(0,t.jsx)("div",{onClick:()=>l(!1),className:" fixed inset-0 bg-black/60 backdrop-blur-sm z-[999999] overflow-y-auto flex items-start md:items-center justify-center pt-20 md:pt-0 pb-10 koje-modal-overlay ",children:(0,t.jsxs)("div",{onClick:e=>e.stopPropagation(),className:" relative w-[92%] sm:w-full max-w-md bg-white rounded-3xl shadow-xl p-6 z-[1000000] max-h-[85vh] overflow-y-auto koje-modal-box ",children:[(0,t.jsx)("button",{type:"button",onClick:()=>l(!1),className:"absolute right-4 top-4 text-2xl text-gray-500 hover:text-[#0FA3A8] z-[1000002]",children:"âœ•"}),(0,t.jsx)("h3",{className:"text-xl font-semibold mb-1 text-[#0B4B50]",children:"Tulis Testimoni Kamu ðŸ’¬"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Ceritakan pengalamanmu setelah minum KOJE24."}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-3 pb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-gray-600",children:"Nama Lengkap"}),(0,t.jsx)("input",{value:y.nama,onChange:e=>N({...y,nama:e.target.value}),placeholder:"Contoh: Herlan S.",className:"mt-1 border p-2 rounded-lg w-full text-sm"}),o.nama&&(0,t.jsx)("p",{className:"text-[11px] text-red-500",children:o.nama})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-gray-600",children:"Kota / Domisili"}),(0,t.jsx)("input",{value:y.kota,onChange:e=>N({...y,kota:e.target.value}),placeholder:"Contoh: Bekasi",className:"mt-1 border p-2 rounded-lg w-full text-sm"}),o.kota&&(0,t.jsx)("p",{className:"text-[11px] text-red-500",children:o.kota})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-gray-600",children:"Ceritakan Pengalamanmu"}),(0,t.jsx)("textarea",{value:y.pesan,onChange:e=>N({...y,pesan:e.target.value}),placeholder:"Contoh: Setelah rutin minum KOJE24...",rows:3,className:"mt-1 border p-2 rounded-lg w-full text-sm resize-none"}),o.pesan&&(0,t.jsx)("p",{className:"text-[11px] text-red-500",children:o.pesan})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-gray-600",children:"Varian Favorit"}),(0,t.jsxs)("select",{value:y.varian,onChange:e=>N({...y,varian:e.target.value}),className:"mt-1 border p-2 rounded-lg w-full text-sm",children:[(0,t.jsx)("option",{value:"",children:"Pilih Varian"}),(0,t.jsx)("option",{children:"Golden Detox"}),(0,t.jsx)("option",{children:"Yellow Immunity"}),(0,t.jsx)("option",{children:"Green Revive"}),(0,t.jsx)("option",{children:"Sunrise Boost"}),(0,t.jsx)("option",{children:"Lemongrass Fresh"}),(0,t.jsx)("option",{children:"Red Vitality"})]}),o.varian&&(0,t.jsx)("p",{className:"text-[11px] text-red-500",children:o.varian})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-gray-600",children:"Rating Kepuasan"}),(0,t.jsx)("div",{className:"flex gap-1 mt-1",children:[1,2,3,4,5].map(e=>(0,t.jsx)("button",{type:"button",onMouseEnter:()=>p(e),onMouseLeave:()=>p(null),onClick:()=>N({...y,rating:e}),className:"text-xl",children:(0,t.jsx)("span",{className:(g??y.rating)>=e?"text-yellow-400":"text-gray-300",children:"â˜…"})},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs text-gray-600",children:"Foto (opsional)"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0]||null;f(t),t&&b(URL.createObjectURL(t))},className:"mt-1 border p-2 rounded-lg w-full text-sm"}),j&&(0,t.jsx)("img",{src:j,className:"w-20 h-20 rounded-lg object-cover mt-2 border"})]}),u&&(0,t.jsx)("p",{className:"text-[11px] text-center text-gray-600",children:u}),(0,t.jsx)("button",{type:"submit",disabled:n,className:"w-full bg-[#0FA3A8] text-white py-2.5 rounded-full text-sm font-medium",children:n?"Mengirimâ€¦":"Kirim Testimoni"})]})]})})]})}e.s(["default",()=>m],77661)},54937,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(77661);function l(){let[e,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/testimonial",{cache:"no-store"}),t=(await e.json()).filter(e=>["true","1","yes","ya"].includes(String(e.active).trim().toLowerCase())).reverse();l(t)}finally{i(!1)}})()},[]),(0,t.jsx)("section",{className:"py-16 md:py-20 bg-[#f6fbfb] min-h-screen",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[(0,t.jsxs)("div",{className:"text-center mb-10",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.25em] text-[#0FA3A8] mb-2",children:"SEMUA ULASAN"}),(0,t.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-[#0B4B50]",children:["Semua Testimoni ",(0,t.jsx)("span",{className:"text-[#0FA3A8]",children:"KOJE24"})]}),(0,t.jsx)("p",{className:"text-gray-500 text-sm max-w-xl mx-auto mt-2",children:"Terima kasih untuk semua pelanggan yang sudah berbagi pengalaman setelah minum KOJE24. ðŸ’š"})]}),(0,t.jsx)("div",{className:"flex justify-center mb-10",children:(0,t.jsx)(s.default,{onSuccess:()=>window.location.reload()})}),n?(0,t.jsx)("p",{className:"text-center text-gray-500",children:"Memuat testimoni..."}):0===e.length?(0,t.jsx)("p",{className:"text-center text-gray-500",children:"Belum ada testimoni yang aktif. ðŸ˜‡"}):(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-7",children:e.map((e,a)=>{let s=Math.min(5,Math.max(1,Number(e.rating))),l=(e.nama||"").split(" ").map(e=>e[0]).join("").slice(0,2)||"K";return(0,t.jsxs)("article",{className:"bg-white border border-[#e6eeee]/70 rounded-3xl p-6 shadow-[0_14px_40px_rgba(11,75,80,0.10)] hover:shadow-[0_18px_55px_rgba(11,75,80,0.17)] transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[e.img?(0,t.jsx)("img",{src:e.img,alt:e.nama,className:"w-10 h-10 rounded-full object-cover border border-[#e6eeee]"}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#0FA3A8]/10 flex items-center justify-center text-xs font-semibold text-[#0B4B50]",children:l}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-playfair text-lg font-semibold text-[#0B4B50]",children:e.nama}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.kota})]}),(0,t.jsxs)("div",{className:"text-right text-yellow-500 text-sm leading-none",children:["â˜…".repeat(s),(0,t.jsx)("span",{className:"text-gray-300",children:"â˜…".repeat(5-s)})]})]}),(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-[0.16em] text-[#0FA3A8] mb-1",children:e.varian}),(0,t.jsxs)("p",{className:"italic text-gray-700 leading-relaxed",children:["â€œ",e.pesan,"â€"]})]},a)})})]})})}e.s(["default",()=>l])}]);