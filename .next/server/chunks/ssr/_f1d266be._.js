module.exports=[30089,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"setAttributesFromProps",{enumerable:!0,get:function(){return g}});let d={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv",noModule:"noModule"},e=["onLoad","onReady","dangerouslySetInnerHTML","children","onError","strategy","stylesheets"];function f(a){return["async","defer","noModule"].includes(a)}function g(a,b){for(let[c,g]of Object.entries(b)){if(!b.hasOwnProperty(c)||e.includes(c)||void 0===g)continue;let h=d[c]||c.toLowerCase();"SCRIPT"===a.tagName&&f(h)?a[h]=!!g:a.setAttribute(h,String(g)),(!1===g||"SCRIPT"===a.tagName&&f(h)&&(!g||"false"===g))&&(a.setAttribute(h,""),a.removeAttribute(h))}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},12962,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={cancelIdleCallback:function(){return g},requestIdleCallback:function(){return f}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(a){let b=Date.now();return self.setTimeout(function(){a({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-b))}})},1)},g="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(a){return clearTimeout(a)};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},96665,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return t},handleClientScriptLoad:function(){return q},initScriptLoader:function(){return r}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(33354),g=a.r(46058),h=a.r(87924),i=f._(a.r(35112)),j=g._(a.r(72131)),k=a.r(92966),l=a.r(30089),m=a.r(12962),n=new Map,o=new Set,p=a=>{let{src:b,id:c,onLoad:d=()=>{},onReady:e=null,dangerouslySetInnerHTML:f,children:g="",strategy:h="afterInteractive",onError:j,stylesheets:k}=a,m=c||b;if(m&&o.has(m))return;if(n.has(b)){o.add(m),n.get(b).then(d,j);return}let p=()=>{e&&e(),o.add(m)},q=document.createElement("script"),r=new Promise((a,b)=>{q.addEventListener("load",function(b){a(),d&&d.call(this,b),p()}),q.addEventListener("error",function(a){b(a)})}).catch(function(a){j&&j(a)});f?(q.innerHTML=f.__html||"",p()):g?(q.textContent="string"==typeof g?g:Array.isArray(g)?g.join(""):"",p()):b&&(q.src=b,n.set(b,r)),(0,l.setAttributesFromProps)(q,a),"worker"===h&&q.setAttribute("type","text/partytown"),q.setAttribute("data-nscript",h),k&&(a=>{if(i.default.preinit)return a.forEach(a=>{i.default.preinit(a,{as:"style"})})})(k),document.body.appendChild(q)};function q(a){let{strategy:b="afterInteractive"}=a;"lazyOnload"===b?window.addEventListener("load",()=>{(0,m.requestIdleCallback)(()=>p(a))}):p(a)}function r(a){a.forEach(q),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(a=>{let b=a.id||a.getAttribute("src");o.add(b)})}function s(a){let{id:b,src:c="",onLoad:d=()=>{},onReady:e=null,strategy:f="afterInteractive",onError:g,stylesheets:l,...n}=a,{updateScripts:q,scripts:r,getIsSsr:s,appDir:t,nonce:u}=(0,j.useContext)(k.HeadManagerContext);u=n.nonce||u;let v=(0,j.useRef)(!1);(0,j.useEffect)(()=>{let a=b||c;v.current||(e&&a&&o.has(a)&&e(),v.current=!0)},[e,b,c]);let w=(0,j.useRef)(!1);if((0,j.useEffect)(()=>{if(!w.current){if("afterInteractive"===f)p(a);else"lazyOnload"===f&&("complete"===document.readyState?(0,m.requestIdleCallback)(()=>p(a)):window.addEventListener("load",()=>{(0,m.requestIdleCallback)(()=>p(a))}));w.current=!0}},[a,f]),("beforeInteractive"===f||"worker"===f)&&(q?(r[f]=(r[f]||[]).concat([{id:b,src:c,onLoad:d,onReady:e,onError:g,...n,nonce:u}]),q(r)):s&&s()?o.add(b||c):s&&!s()&&p({...a,nonce:u})),t){if(l&&l.forEach(a=>{i.default.preinit(a,{as:"style"})}),"beforeInteractive"===f)if(!c)return n.dangerouslySetInnerHTML&&(n.children=n.dangerouslySetInnerHTML.__html,delete n.dangerouslySetInnerHTML),(0,h.jsx)("script",{nonce:u,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([0,{...n,id:b}])})`}});else return i.default.preload(c,n.integrity?{as:"script",integrity:n.integrity,nonce:u,crossOrigin:n.crossOrigin}:{as:"script",nonce:u,crossOrigin:n.crossOrigin}),(0,h.jsx)("script",{nonce:u,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([c,{...n,id:b}])})`}});"afterInteractive"===f&&c&&i.default.preload(c,n.integrity?{as:"script",integrity:n.integrity,nonce:u,crossOrigin:n.crossOrigin}:{as:"script",nonce:u,crossOrigin:n.crossOrigin})}return null}Object.defineProperty(s,"__nextScript",{value:!0});let t=s;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},47283,(a,b,c)=>{b.exports=a.r(96665)},52694,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(92754),f=a.i(47283);function g(){let a=(0,d.useRouter)(),g=(0,e.useCartStore)(a=>a.items),h=(0,e.useCartStore)(a=>a.clearCart),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)("transfer"),[u,v]=(0,c.useState)("idle"),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(15e3),C=(0,c.useRef)(null),[D,E]=(0,c.useState)(null),F=g.reduce((a,b)=>a+b.price*b.qty,0),G=F+(g.length>0?A:0);(0,c.useEffect)(()=>{},[]),(0,c.useEffect)(()=>{j(!0)},[]),(0,c.useEffect)(()=>{if(i&&0===g.length){let b=setTimeout(()=>{a.push("/#produk")},1600);return()=>clearTimeout(b)}},[g.length,i,a]),(0,c.useEffect)(()=>{if(!C.current)return;let a=window;if(a.google?.maps?.places)try{let a=new google.maps.places.Autocomplete(C.current,{componentRestrictions:{country:"id"}});a.setFields(["formatted_address","geometry"]),a.addListener("place_changed",()=>{let b,c=a.getPlace();if(!c||!c.geometry?.location)return;let d=c.geometry.location.lat(),e=c.geometry.location.lng(),f=(b=Math.sin((d- -6.2903238)*Math.PI/180/2)**2+Math.cos(-6.2903238*Math.PI/180)*Math.cos(d*Math.PI/180)*Math.sin((e-107.087373)*Math.PI/180/2)**2,12742*Math.atan2(Math.sqrt(b),Math.sqrt(1-b))),g=f&&!(f<=0)?Math.max(1e4,100*Math.round((8e3+3e3*f)/100)):15e3;z(f),B(g),c.formatted_address&&p(c.formatted_address)})}catch(a){console.error("Autocomplete init error:",a)}},[]);let H=async b=>{if(b.preventDefault(),g.length){if(!k.trim()||!m.trim()||!o.trim())return void x("Lengkapi nama, nomor WhatsApp, dan alamat dulu ya ðŸ™");if(["transfer","qris"].includes(s)&&!D)return void x("Upload Bukti Pembayaran (Transfer / QRIS) dulu ya sebelum submit ðŸ™");try{v("submitting"),x("");let b=g.map(a=>({id:a.id,name:a.name,qty:a.qty,price:a.price})),c=await fetch("/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nama:k,hp:m,alamat:o,note:q,payment:s,cart:b,distanceKm:y,shippingCost:A,grandTotal:G})}),d=await c.json();if(!c.ok||!d?.success)throw Error(d?.message||"Gagal membuat invoice");fetch("/api/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k,phone:m,address:o,note:q,order:b,total:G})}).catch(a=>console.error("WA send failed:",a)),h(),a.push(d.invoiceUrl||"/")}catch(a){console.error("Checkout error:",a),v("error"),x("Ada kendala saat membuat invoice. Coba lagi sebentar ya ðŸ™")}finally{v("idle")}}},I="submitting"===u||!g.length;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.default,{src:`https://maps.googleapis.com/maps/api/js?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}&libraries=places`,strategy:"lazyOnload"}),(0,b.jsx)("main",{className:"min-h-screen bg-[#F4FAFA] text-[#0B4B50] py-10 px-4 flex justify-center",children:(0,b.jsxs)("div",{className:"w-full max-w-5xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("p",{className:"text-xs tracking-[0.25em] text-[#0FA3A8]",children:"KOJE24 â€¢ PREMIUM CHECKOUT"}),(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-playfair font-semibold",children:"Selesaikan Pesanan Kamu"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-2 max-w-xl",children:"Isi alamat dengan teliti. Ongkir dihitung otomatis berdasarkan jarak."})]}),i&&0===g.length?(0,b.jsx)("p",{className:"text-center text-gray-500",children:"Keranjang kosong. Mengarahkan kembaliâ€¦"}):(0,b.jsxs)("div",{className:"grid gap-8 md:grid-cols-[1.15fr_0.85fr]",children:[(0,b.jsx)("section",{className:"bg-white border rounded-3xl shadow p-6 md:p-7",children:(0,b.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,b.jsx)("input",{className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#0FA3A8]/60",placeholder:"Nama lengkap",value:k,onChange:a=>l(a.target.value)}),(0,b.jsx)("input",{className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#0FA3A8]/60",placeholder:"Nomor WhatsApp",value:m,onChange:a=>n(a.target.value)}),(0,b.jsx)("input",{ref:C,className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#0FA3A8]/60",placeholder:"Alamat lengkap (bisa pilih dari Google)",value:o,onChange:a=>p(a.target.value)}),y&&(0,b.jsxs)("p",{className:"text-[12px] text-gray-500",children:["Jarak ",y.toFixed(1)," km â€¢ Ongkir Rp",A.toLocaleString("id-ID")]}),(0,b.jsx)("textarea",{className:"border rounded-lg px-3 py-2 w-full h-16 resize-none focus:outline-none focus:ring-2 focus:ring-[#0FA3A8]/60",placeholder:"Catatan (opsional)",value:q,onChange:a=>r(a.target.value)}),(0,b.jsx)("h2",{className:"font-playfair text-xl mt-5 mb-1",children:"Metode Pembayaran"}),(0,b.jsxs)("div",{className:"rounded-xl bg-[#f7fbfb] border p-4 space-y-3",children:[["transfer","qris","cod"].map(a=>(0,b.jsx)("label",{className:`flex items-center justify-between gap-3 cursor-pointer rounded-lg px-3 py-2 ${s===a?"bg-white border border-[#0FA3A8]":"border border-transparent"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"radio",name:"payment",checked:s===a,onChange:()=>{t(a),E(null)}}),(0,b.jsx)("span",{className:"capitalize",children:"cod"===a?"COD (Bayar di tempat)":a})]})},a)),["transfer","qris"].includes(s)&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-[#0B4B50] mb-1",children:"Upload Bukti Pembayaran (Transfer / QRIS)"}),(0,b.jsx)("input",{type:"file",accept:"image/*,.pdf",onChange:a=>E(a.target.files?.[0]?a.target.files[0]:null),className:"border rounded-lg px-3 py-2 w-full text-sm cursor-pointer bg-white"}),D&&(0,b.jsxs)("p",{className:"text-[11px] mt-1 text-gray-500",children:["File: ",D.name]})]})]}),w&&(0,b.jsx)("p",{className:"text-red-500 text-sm pt-1",children:w}),(0,b.jsx)("button",{disabled:I,className:"w-full bg-[#0FA3A8] text-white py-3 rounded-full font-semibold disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:"submitting"===u?"Memproses pesanan...":"Buat Pesanan"})]})}),(0,b.jsxs)("aside",{className:"bg-white border rounded-3xl shadow p-6 flex flex-col gap-4",children:[(0,b.jsx)("h2",{className:"font-playfair text-xl",children:"Ringkasan Pesanan"}),(0,b.jsx)("div",{className:"max-h-[260px] overflow-y-auto space-y-3 pr-1",children:g.map(a=>(0,b.jsxs)("div",{className:"flex justify-between items-start border-b pb-2 text-sm gap-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-[#0B4B50]",children:a.name}),(0,b.jsxs)("p",{className:"text-[12px] text-gray-500",children:[a.qty,"x â€¢ Rp",a.price.toLocaleString("id-ID")," / pcs"]})]}),(0,b.jsxs)("div",{className:"font-semibold whitespace-nowrap",children:["Rp",(a.qty*a.price).toLocaleString("id-ID")]})]},a.id))}),(0,b.jsxs)("div",{className:"border-t pt-3 space-y-1 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsxs)("span",{children:["Rp",F.toLocaleString("id-ID")]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Ongkir"}),(0,b.jsxs)("span",{children:["Rp",A.toLocaleString("id-ID")]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-semibold text-lg pt-1",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{children:["Rp",G.toLocaleString("id-ID")]})]})]})]})]})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=_f1d266be._.js.map