(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94016,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function s(){let[e,s]=(0,a.useState)(!1),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)(""),[d,o]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),x=(0,a.useRef)(null),f=(0,a.useRef)(null);async function m(e){let t=e.trim();if(!t)return;let a={role:"user",content:t};u(!0),r(e=>{let t=[...e,a];return fetch("/api/koje24-assistant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t})}).then(e=>e.json()).then(e=>{let t={role:"assistant",content:e.reply||"Siap kak! ðŸ˜Š"};r(e=>[...e,t])}).catch(()=>{r(e=>[...e,{role:"assistant",content:"Maaf kak, server sedang lambat ðŸ™ coba kirim ulang."}])}).finally(()=>u(!1)),t})}return((0,a.useEffect)(()=>{window.location.pathname.includes("bantuan")&&o(!0)},[]),(0,a.useEffect)(()=>{if(d)try{let e=window.localStorage.getItem("koje24-chat");e?r(JSON.parse(e)):r([{role:"assistant",content:"Halo ðŸ‘‹ Aku KOJE24 Assistant. Ceritain keluhanmu ya, nanti aku bantu pilih varian yang pas."}])}catch{r([{role:"assistant",content:"Halo ðŸ‘‹ Aku KOJE24 Assistant. Ceritain keluhanmu ya, nanti aku bantu pilih varian yang pas."}])}},[d]),(0,a.useEffect)(()=>{try{window.localStorage.setItem("koje24-chat",JSON.stringify(n))}catch{}if(f.current){let e=f.current;requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})}},[n]),(0,a.useEffect)(()=>{function e(e){e?.detail&&(s(!0),m(e.detail))}return window.addEventListener("open-koje24",e),()=>window.removeEventListener("open-koje24",e)},[]),(0,a.useEffect)(()=>{if(!e){x.current&&(clearTimeout(x.current),x.current=null);return}return x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{r([]),s(!1),window.localStorage.removeItem("koje24-chat")},12e4),()=>{x.current&&clearTimeout(x.current)}},[e,n.length]),d)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"fixed bottom-7 right-7 bg-[#0FA3A8] text-white px-5 py-3 rounded-full shadow-xl hover:shadow-[0_0_35px_rgba(15,163,168,0.65)] transition-all duration-300 z-[200] flex items-center gap-2",onClick:()=>s(!0),children:["ðŸ¤– ",(0,t.jsx)("span",{className:"font-semibold",children:"KOJE24"})]}),e&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-end justify-center z-[300]",children:(0,t.jsxs)("div",{className:" w-full  max-w-md  bg-white  rounded-3xl  shadow-2xl  overflow-hidden  animate-slide-up  max-h-[85vh] flex flex-col ",children:[(0,t.jsxs)("div",{className:"px-5 py-4 bg-white border-b border-[#e4f3f3] flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-9 h-9 rounded-full bg-[#0FA3A8] text-white flex items-center justify-center font-bold",children:"K"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-[#0b4b50]",children:"KOJE24 Assistant"}),(0,t.jsx)("p",{className:"text-[11px] text-slate-500",children:"Online â€¢ Jawaban cepat"})]})]}),(0,t.jsx)("button",{className:"text-[#0b4b50] hover:text-[#0FA3A8] transition",onClick:()=>s(!1),children:"âœ•"})]}),(0,t.jsxs)("div",{ref:f,className:"flex-1 overflow-y-auto px-4 py-4 bg-[#f6fefe] space-y-4",children:[n.map((e,a)=>(0,t.jsxs)("div",{className:`flex items-end gap-2 ${"user"===e.role?"justify-end":"justify-start"}`,children:["user"!==e.role&&(0,t.jsx)("div",{className:"w-7 h-7 rounded-full bg-[#0FA3A8] text-white flex items-center justify-center text-xs",children:"K"}),(0,t.jsx)("div",{className:"user"===e.role?"bg-[#0FA3A8] text-white px-4 py-2.5 rounded-3xl rounded-br-md max-w-[75%] shadow":"bg-white border border-[#d9eded] text-[#0b4b50] px-4 py-2.5 rounded-3xl rounded-bl-md max-w-[75%] shadow",children:e.content}),"user"===e.role&&(0,t.jsx)("div",{className:"w-7 h-7 rounded-full bg-[#e3f7f7] border border-[#cdeaea] flex items-center justify-center text-xs text-[#0b4b50]",children:"U"})]},a)),c&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-7 h-7 rounded-full bg-[#0FA3A8] text-white flex items-center justify-center text-xs",children:"K"}),(0,t.jsx)("div",{className:"bg-white border border-[#d9eded] px-4 py-2.5 rounded-3xl rounded-bl-md shadow max-w-[60%]",children:(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("span",{className:"dot"}),(0,t.jsx)("span",{className:"dot"}),(0,t.jsx)("span",{className:"dot"})]})})]})]}),(0,t.jsx)("div",{className:"px-4 pb-3 pt-1 flex gap-2 overflow-x-auto bg-white border-t border-[#e8f5f5]",children:["Rekomendasi detox harian","Varian aman untuk maag","Varian untuk imun harian","Jus untuk pencernaan & begah","Tanya kandungan jus KOJE24"].map((e,a)=>(0,t.jsx)("button",{onClick:()=>m(e),className:"bg-[#e8fafa] text-[#0b4b50] px-3 py-1.5 rounded-full text-xs border border-[#cdeaea] hover:bg-[#def3f3] transition whitespace-nowrap",children:e},a))}),(0,t.jsx)("form",{onSubmit:function(e){e.preventDefault(),l.trim()&&(m(l),i(""))},className:"p-4 bg-white border-t border-[#e4f3f3]",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-[#f0fbfb] border border-[#d6eded] rounded-full px-4 py-2.5",children:[(0,t.jsx)("input",{value:l,onChange:e=>i(e.target.value),className:"flex-1 bg-transparent outline-none text-sm text-[#0b4b50]",placeholder:"Tulis pesanâ€¦"}),(0,t.jsx)("button",{type:"submit",className:"bg-[#0FA3A8] text-white px-4 py-1.5 rounded-full text-sm shadow-sm hover:bg-[#0b8f93] transition",children:"Kirim"})]})})]})})]}):null}e.s(["default",()=>s])},44142,e=>{e.n(e.i(94016))}]);