(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8341,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={cancelIdleCallback:function(){return l},requestIdleCallback:function(){return s}};for(var n in r)Object.defineProperty(a,n,{enumerable:!0,get:r[n]});let s="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},l="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},79520,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={default:function(){return b},handleClientScriptLoad:function(){return g},initScriptLoader:function(){return x}};for(var n in r)Object.defineProperty(a,n,{enumerable:!0,get:r[n]});let s=e.r(55682),l=e.r(90809),i=e.r(43476),o=s._(e.r(74080)),c=l._(e.r(71645)),d=e.r(42732),u=e.r(22737),f=e.r(8341),p=new Map,m=new Set,h=e=>{let{src:t,id:a,onLoad:r=()=>{},onReady:n=null,dangerouslySetInnerHTML:s,children:l="",strategy:i="afterInteractive",onError:c,stylesheets:d}=e,f=a||t;if(f&&m.has(f))return;if(p.has(t)){m.add(f),p.get(t).then(r,c);return}let h=()=>{n&&n(),m.add(f)},g=document.createElement("script"),x=new Promise((e,t)=>{g.addEventListener("load",function(t){e(),r&&r.call(this,t),h()}),g.addEventListener("error",function(e){t(e)})}).catch(function(e){c&&c(e)});s?(g.innerHTML=s.__html||"",h()):l?(g.textContent="string"==typeof l?l:Array.isArray(l)?l.join(""):"",h()):t&&(g.src=t,p.set(t,x)),(0,u.setAttributesFromProps)(g,e),"worker"===i&&g.setAttribute("type","text/partytown"),g.setAttribute("data-nscript",i),d&&(e=>{if(o.default.preinit)return e.forEach(e=>{o.default.preinit(e,{as:"style"})});if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,t.appendChild(a)})}})(d),document.body.appendChild(g)};function g(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,f.requestIdleCallback)(()=>h(e))}):h(e)}function x(e){e.forEach(g),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");m.add(t)})}function y(e){let{id:t,src:a="",onLoad:r=()=>{},onReady:n=null,strategy:s="afterInteractive",onError:l,stylesheets:u,...p}=e,{updateScripts:g,scripts:x,getIsSsr:y,appDir:b,nonce:j}=(0,c.useContext)(d.HeadManagerContext);j=p.nonce||j;let v=(0,c.useRef)(!1);(0,c.useEffect)(()=>{let e=t||a;v.current||(n&&e&&m.has(e)&&n(),v.current=!0)},[n,t,a]);let w=(0,c.useRef)(!1);if((0,c.useEffect)(()=>{if(!w.current){if("afterInteractive"===s)h(e);else"lazyOnload"===s&&("complete"===document.readyState?(0,f.requestIdleCallback)(()=>h(e)):window.addEventListener("load",()=>{(0,f.requestIdleCallback)(()=>h(e))}));w.current=!0}},[e,s]),("beforeInteractive"===s||"worker"===s)&&(g?(x[s]=(x[s]||[]).concat([{id:t,src:a,onLoad:r,onReady:n,onError:l,...p,nonce:j}]),g(x)):y&&y()?m.add(t||a):y&&!y()&&h({...e,nonce:j})),b){if(u&&u.forEach(e=>{o.default.preinit(e,{as:"style"})}),"beforeInteractive"===s)if(!a)return p.dangerouslySetInnerHTML&&(p.children=p.dangerouslySetInnerHTML.__html,delete p.dangerouslySetInnerHTML),(0,i.jsx)("script",{nonce:j,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([0,{...p,id:t}])})`}});else return o.default.preload(a,p.integrity?{as:"script",integrity:p.integrity,nonce:j,crossOrigin:p.crossOrigin}:{as:"script",nonce:j,crossOrigin:p.crossOrigin}),(0,i.jsx)("script",{nonce:j,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([a,{...p,id:t}])})`}});"afterInteractive"===s&&a&&o.default.preload(a,p.integrity?{as:"script",integrity:p.integrity,nonce:j,crossOrigin:p.crossOrigin}:{as:"script",nonce:j,crossOrigin:p.crossOrigin})}return null}Object.defineProperty(y,"__nextScript",{value:!0});let b=y;("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},3303,(e,t,a)=>{t.exports=e.r(79520)},37142,e=>{"use strict";var t=e.i(47167),a=e.i(43476),r=e.i(71645),n=e.i(18566),s=e.i(1184),l=e.i(3303);function i(){let e=(0,n.useRouter)(),i=(0,s.useCartStore)(e=>e.items),o=(0,s.useCartStore)(e=>e.clearCart),[c,d]=(0,r.useState)(!1),[u,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[x,y]=(0,r.useState)(""),[b,j]=(0,r.useState)("transfer"),[v,w]=(0,r.useState)("idle"),[_,N]=(0,r.useState)(""),[S,I]=(0,r.useState)(null),[k,C]=(0,r.useState)(15e3),O=(0,r.useRef)(null),[A,M]=(0,r.useState)(null),P=i.reduce((e,t)=>e+t.price*t.qty,0),T=P+(i.length>0?k:0);(0,r.useEffect)(()=>{window.scrollTo({top:0})},[]),(0,r.useEffect)(()=>{d(!0)},[]),(0,r.useEffect)(()=>{if(c&&0===i.length){let t=setTimeout(()=>{e.push("/#produk")},1600);return()=>clearTimeout(t)}},[i.length,c,e]),(0,r.useEffect)(()=>{if(!O.current)return;let e=window;if(e.google?.maps?.places)try{let e=new google.maps.places.Autocomplete(O.current,{componentRestrictions:{country:"id"}});e.setFields(["formatted_address","geometry"]),e.addListener("place_changed",()=>{let t,a=e.getPlace();if(!a||!a.geometry?.location)return;let r=a.geometry.location.lat(),n=a.geometry.location.lng(),s=(t=Math.sin((r- -6.2903238)*Math.PI/180/2)**2+Math.cos(-6.2903238*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin((n-107.087373)*Math.PI/180/2)**2,12742*Math.atan2(Math.sqrt(t),Math.sqrt(1-t))),l=s&&!(s<=0)?Math.max(1e4,100*Math.round((8e3+3e3*s)/100)):15e3;I(s),C(l),a.formatted_address&&g(a.formatted_address)})}catch(e){console.error("Autocomplete init error:",e)}},[]);let E=async t=>{if(t.preventDefault(),i.length){if(!u.trim()||!p.trim()||!h.trim())return void N("Lengkapi nama, nomor WhatsApp, dan alamat dulu ya ðŸ™");if(["transfer","qris"].includes(b)&&!A)return void N("Upload Bukti Pembayaran (Transfer / QRIS) dulu ya sebelum submit ðŸ™");try{w("submitting"),N("");let t=i.map(e=>({id:e.id,name:e.name,qty:e.qty,price:e.price})),a=await fetch("/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nama:u,hp:p,alamat:h,note:x,payment:b,cart:t,distanceKm:S,shippingCost:k,grandTotal:T})}),r=await a.json();if(!a.ok||!r?.success)throw Error(r?.message||"Gagal membuat invoice");fetch("/api/whatsapp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u,phone:p,address:h,note:x,order:t,total:T})}).catch(e=>console.error("WA send failed:",e)),o(),e.push(r.invoiceUrl||"/")}catch(e){console.error("Checkout error:",e),w("error"),N("Ada kendala saat membuat invoice. Coba lagi sebentar ya ðŸ™")}finally{w("idle")}}},L="submitting"===v||!i.length;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{src:`https://maps.googleapis.com/maps/api/js?key=${t.default.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}&libraries=places`,strategy:"lazyOnload"}),(0,a.jsx)("main",{className:"min-h-screen bg-[#F4FAFA] text-[#0B4B50] py-10 px-4 flex justify-center",children:(0,a.jsxs)("div",{className:"w-full max-w-5xl",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("p",{className:"text-xs tracking-[0.25em] text-[#0FA3A8]",children:"KOJE24 â€¢ PREMIUM CHECKOUT"}),(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-playfair font-semibold",children:"Selesaikan Pesanan Kamu"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 max-w-xl",children:"Isi alamat dengan teliti. Ongkir dihitung otomatis berdasarkan jarak."})]}),c&&0===i.length?(0,a.jsx)("p",{className:"text-center text-gray-500",children:"Keranjang kosong. Mengarahkan kembaliâ€¦"}):(0,a.jsxs)("div",{className:"grid gap-8 md:grid-cols-[1.15fr_0.85fr]",children:[(0,a.jsx)("section",{className:"bg-white border rounded-3xl shadow p-6 md:p-7",children:(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,a.jsx)("input",{className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#0FA3A8]/60",placeholder:"Nama lengkap",value:u,onChange:e=>f(e.target.value)}),(0,a.jsx)("input",{className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#0FA3A8]/60",placeholder:"Nomor WhatsApp",value:p,onChange:e=>m(e.target.value)}),(0,a.jsx)("input",{ref:O,className:"border rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#0FA3A8]/60",placeholder:"Alamat lengkap (bisa pilih dari Google)",value:h,onChange:e=>g(e.target.value)}),S&&(0,a.jsxs)("p",{className:"text-[12px] text-gray-500",children:["Jarak ",S.toFixed(1)," km â€¢ Ongkir Rp",k.toLocaleString("id-ID")]}),(0,a.jsx)("textarea",{className:"border rounded-lg px-3 py-2 w-full h-16 resize-none focus:outline-none focus:ring-2 focus:ring-[#0FA3A8]/60",placeholder:"Catatan (opsional)",value:x,onChange:e=>y(e.target.value)}),(0,a.jsx)("h2",{className:"font-playfair text-xl mt-5 mb-1",children:"Metode Pembayaran"}),(0,a.jsxs)("div",{className:"rounded-xl bg-[#f7fbfb] border p-4 space-y-3",children:[["transfer","qris","cod"].map(e=>(0,a.jsx)("label",{className:`flex items-center justify-between gap-3 cursor-pointer rounded-lg px-3 py-2 ${b===e?"bg-white border border-[#0FA3A8]":"border border-transparent"}`,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"radio",name:"payment",checked:b===e,onChange:()=>{j(e),M(null)}}),(0,a.jsx)("span",{className:"capitalize",children:"cod"===e?"COD (Bayar di tempat)":e})]})},e)),["transfer","qris"].includes(b)&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[#0B4B50] mb-1",children:"Upload Bukti Pembayaran (Transfer / QRIS)"}),(0,a.jsx)("input",{type:"file",accept:"image/*,.pdf",onChange:e=>M(e.target.files?.[0]?e.target.files[0]:null),className:"border rounded-lg px-3 py-2 w-full text-sm cursor-pointer bg-white"}),A&&(0,a.jsxs)("p",{className:"text-[11px] mt-1 text-gray-500",children:["File: ",A.name]})]})]}),_&&(0,a.jsx)("p",{className:"text-red-500 text-sm pt-1",children:_}),(0,a.jsx)("button",{disabled:L,className:"w-full bg-[#0FA3A8] text-white py-3 rounded-full font-semibold disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:"submitting"===v?"Memproses pesanan...":"Buat Pesanan"})]})}),(0,a.jsxs)("aside",{className:"bg-white border rounded-3xl shadow p-6 flex flex-col gap-4",children:[(0,a.jsx)("h2",{className:"font-playfair text-xl",children:"Ringkasan Pesanan"}),(0,a.jsx)("div",{className:"max-h-[260px] overflow-y-auto space-y-3 pr-1",children:i.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-start border-b pb-2 text-sm gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-[#0B4B50]",children:e.name}),(0,a.jsxs)("p",{className:"text-[12px] text-gray-500",children:[e.qty,"x â€¢ Rp",e.price.toLocaleString("id-ID")," / pcs"]})]}),(0,a.jsxs)("div",{className:"font-semibold whitespace-nowrap",children:["Rp",(e.qty*e.price).toLocaleString("id-ID")]})]},e.id))}),(0,a.jsxs)("div",{className:"border-t pt-3 space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:["Rp",P.toLocaleString("id-ID")]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Ongkir"}),(0,a.jsxs)("span",{children:["Rp",k.toLocaleString("id-ID")]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold text-lg pt-1",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["Rp",T.toLocaleString("id-ID")]})]})]})]})]})]})})]})}e.s(["default",()=>i])}]);