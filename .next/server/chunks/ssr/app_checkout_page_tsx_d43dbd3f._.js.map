{"version":3,"sources":["turbopack:///[project]/app/checkout/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { Suspense, useState, useEffect } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport QRCode from \"react-qr-code\";\n\ninterface InvoiceData {\n  invoiceId: string;\n  timestamp: string;\n  nama: string;\n  hp: string;\n  alamat: string;\n  produkList: string;\n  qtyTotal: number;\n  subtotalCalc: number;\n  status: string;\n  paymentLabel: string;\n  effectiveOngkir: number;\n  effectiveGrandTotal: number;\n  invoiceUrl: string;\n}\n\nconst SELLER_INFO = {\n  name: \"KOJE24 Official\",\n  address: \"Jl. Kopi Kenangan No. 24, Jakarta Selatan\",\n  hp: \"0811-2233-4455\",\n};\n\nconst formatRupiah = (v: number) =>\n  v.toLocaleString(\"id-ID\", { style: \"currency\", currency: \"IDR\", minimumFractionDigits: 0 });\n\nfunction InvoiceContent() {\n  const { id } = useParams();\n  const invoiceId = String(id);\n  const [invoice, setInvoice] = useState<InvoiceData | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const load = async () => {\n      const r = await fetch(`/api/invoice/${invoiceId}`, { cache: \"no-store\" });\n      const j = await r.json();\n      if (j?.success) setInvoice(j.data);\n      setLoading(false);\n    };\n    load();\n  }, [invoiceId]);\n\n  if (loading) return <div className=\"flex justify-center items-center min-h-screen\">Memuat invoiceâ€¦</div>;\n  if (!invoice) return <div className=\"flex justify-center items-center min-h-screen\">Invoice tidak ditemukan</div>;\n\n  const formattedDate = new Date(invoice.timestamp).toLocaleDateString(\"id-ID\", {\n    day: \"2-digit\",\n    month: \"long\",\n    year: \"numeric\",\n  });\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4 flex justify-center print:p-0\">\n      {/* === PRINT CSS & A4 MODE === */}\n      <style jsx global>{`\n        @media print {\n          @page {\n            size: A4;\n            margin: 0;\n          }\n          body {\n            background: white !important;\n          }\n          .a4 {\n            width: 210mm !important;\n            min-height: 297mm !important;\n            padding: 16mm !important;\n            margin: 0 !important;\n            border-radius: 0 !important;\n            box-shadow: none !important;\n          }\n          .no-print {\n            display: none !important;\n          }\n        }\n      `}</style>\n\n      <div className=\"a4 bg-white w-full max-w-[210mm] mx-auto rounded-xl shadow-xl border p-6 sm:p-10\">\n        {/* WATERMARK PAID */}\n        {invoice.status.toLowerCase() === \"paid\" && (\n          <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none select-none\">\n            <span className=\"font-extrabold text-[90px] sm:text-[130px] text-green-600 opacity-10 rotate-[-25deg] tracking-[0.18em]\">\n              PAID\n            </span>\n          </div>\n        )}\n\n        {/* HEADER */}\n        <div className=\"flex justify-between items-start mb-8 gap-4\">\n          <div>\n            <img src=\"/image/logo-koje24.png\" className=\"h-14 w-auto\" />\n            <p className=\"text-xs text-gray-600 mt-2\">\n              {SELLER_INFO.address} â€¢ Telp: {SELLER_INFO.hp}\n            </p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-3xl font-bold text-[#0B4B50]\">INVOICE</p>\n            <p className=\"font-semibold mt-1\">#{invoice.invoiceId}</p>\n            <p className=\"text-sm text-gray-600 mt-1\">{formattedDate}</p>\n          </div>\n        </div>\n\n        {/* PEMBELI */}\n        <div className=\"mb-8\">\n          <p className=\"text-sm font-bold text-gray-700 mb-1\">Pembeli:</p>\n          <p className=\"text-base font-medium\">{invoice.nama}</p>\n          <p className=\"text-sm text-gray-700\">{invoice.alamat}</p>\n          <p className=\"text-sm text-gray-700\">Telp: {invoice.hp}</p>\n        </div>\n\n        {/* PRODUK */}\n        <div className=\"mb-8\">\n          <table className=\"w-full text-sm border border-gray-300\">\n            <thead className=\"bg-gray-100\">\n              <tr>\n                <th className=\"border py-2 px-3 text-left\">Deskripsi</th>\n                <th className=\"border py-2 w-20 text-center\">Qty</th>\n                <th className=\"border py-2 w-32 text-right px-3\">Subtotal</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td className=\"border py-2 px-3\">{invoice.produkList}</td>\n                <td className=\"border text-center\">{invoice.qtyTotal}</td>\n                <td className=\"border text-right px-3\">{formatRupiah(invoice.subtotalCalc)}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n        {/* TOTAL */}\n        <div className=\"flex justify-end mb-8\">\n          <table className=\"text-sm w-full sm:w-auto\">\n            <tbody>\n              <tr>\n                <td className=\"py-1 px-3\">Subtotal Produk:</td>\n                <td className=\"py-1 px-3 text-right font-medium\">{formatRupiah(invoice.subtotalCalc)}</td>\n              </tr>\n              <tr>\n                <td className=\"py-1 px-3\">Ongkir:</td>\n                <td className=\"py-1 px-3 text-right font-medium\">{formatRupiah(invoice.effectiveOngkir)}</td>\n              </tr>\n              <tr className=\"bg-gray-50 text-lg font-bold\">\n                <td className=\"py-2 px-3\">TOTAL DIBAYARKAN:</td>\n                <td className=\"py-2 px-3 text-right text-red-600\">{formatRupiah(invoice.effectiveGrandTotal)}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n\n        {/* QR + BARCODE */}\n        <div className=\"flex justify-between flex-wrap gap-6 mb-6\">\n          <div className=\"text-sm\">\n            <p>Scan untuk membuka invoice online:</p>\n            <div className=\"mt-2 bg-white p-2 border inline-block rounded\">\n              <QRCode value={invoice.invoiceUrl} size={110} />\n            </div>\n          </div>\n          <div className=\"flex flex-col items-center\">\n            <img\n              src={`https://barcodeapi.org/api/128/${invoice.invoiceId}`}\n              className=\"h-20\"\n            />\n            <p className=\"text-xs mt-1\">{invoice.invoiceId}</p>\n          </div>\n        </div>\n\n        {/* FOOTER */}\n        <p className=\"text-center text-gray-600 text-xs border-t pt-3\">\n          Terima kasih telah berbelanja di <b>KOJE24</b> ðŸ’› Semoga sehat & berenergi setiap hari!\n        </p>\n      </div>\n\n      {/* BUTTON CETAK */}\n      <div className=\"text-center mt-6 no-print\">\n        <button\n          onClick={() => window.print()}\n          className=\"px-6 py-2 bg-[#0FA3A8] text-white rounded-full text-sm\"\n        >\n          Cetak & Unduh Invoice (PDF)\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default function InvoicePage() {\n  return (\n    <Suspense fallback={<div className=\"min-h-screen flex justify-center items-center\">Memuat invoiceâ€¦</div>}>\n      <InvoiceContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"qEAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAkBA,IAMM,EANA,AAMe,AAAC,GACpB,EAAE,SAPgB,KAOF,CAAC,QAAS,CAAE,MAAO,WAAY,SAAU,MAAO,sBAAuB,CAAE,GAE3F,SAAS,IACP,GAAM,IAAE,CAAE,CAAE,CAAG,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAY,OAAO,GACnB,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MACrD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAYvC,GAVA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAOR,CANa,UACX,IAAM,EAAI,MAAM,MAAM,CAAC,aAAa,EAAE,EAAA,CAAW,CAAE,CAAE,MAAO,UAAW,GACjE,EAAI,MAAM,EAAE,IAAI,GAClB,GAAG,SAAS,EAAW,EAAE,IAAI,EACjC,GAAW,GACb,GAEF,EAAG,CAAC,EAAU,EAEV,EAAS,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDAAgD,oBACnF,GAAI,CAAC,EAAS,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDAAgD,4BAEpF,IAAM,EAAgB,IAAI,KAAK,EAAQ,SAAS,EAAE,kBAAkB,CAAC,QAAS,CAC5E,IAAK,UACL,MAAO,OACP,KAAM,SACR,GAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,0CAAc,8WAyBb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,0CAAc,mFAEqB,SAAjC,EAAQ,MAAM,CAAC,WAAW,IACzB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,0CAAc,mFACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,0CAAe,wGAAyG,WAO7H,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,0CAAc,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,4CACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAI,kEAAmC,MAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,0CAAY,6BAxEd,4CAyEwB,YAxE7B,uBA2EI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,0CAAc,aACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,0CAAY,mCAAoC,YACjD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,0CAAY,qBAAqB,IAAE,EAAQ,SAAS,IACrD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,0CAAY,4BAA8B,UAK/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,0CAAc,OACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,0CAAY,sCAAuC,aACpD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,0CAAY,uBAAyB,EAAQ,IAAI,GAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,0CAAY,uBAAyB,EAAQ,MAAM,GACpD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,0CAAY,wBAAwB,SAAO,EAAQ,EAAE,OAIxD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,0CAAc,MACb,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,0CAAgB,wCACf,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,0CAAgB,aACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,4CACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,4BAA6B,cAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,8BAA+B,QAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,kCAAmC,kBAGrD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,2CACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,4CACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,kBAAoB,EAAQ,UAAU,GACpD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,oBAAsB,EAAQ,QAAQ,GACpD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,wBAA0B,EAAa,EAAQ,YAAY,cAOjF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,0CAAc,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,0CAAgB,0BACf,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,4CACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,4CACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,WAAY,qBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,kCAAoC,EAAa,EAAQ,YAAY,OAErF,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,4CACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,WAAY,YAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,kCAAoC,EAAa,EAAQ,eAAe,OAExF,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,0CAAa,+BACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,WAAY,sBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,0CAAa,mCAAqC,EAAa,EAAQ,mBAAmB,cAOnG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,0CAAc,4CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,0CAAc,UACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,2CAAE,uCACH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,0CAAc,+CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAC,MAAO,EAAQ,UAAU,CAAE,KAAM,WAG7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,0CAAc,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,CAAC,+BAA+B,EAAE,EAAQ,SAAS,CAAA,CAAE,yCAG5D,CAFY,AAEZ,EAAA,EAAA,GAAA,EAAC,IAAA,0CAAY,cAAgB,EAAQ,SAAS,SAKlD,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,0CAAY,kDAAkD,oCAC5B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,2CAAE,WAAU,kDAKlD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,0CAAc,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,OAAO,KAAK,4CACjB,wDACX,oCAMT,CAEe,SAAS,IACtB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,SAAU,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDAAgD,6BACjF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,IAGP"}